(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-aada272e"],{"0aa9":function(e,t,a){"use strict";a("7f7f");var n=a("d225"),r=a("b0b4"),i=a("308d"),o=a("6bb5"),c=a("4e2b"),s=a("9ab4"),u=a("60a3"),l=a("6a8d"),d=a("d257"),p=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(i.a)(this,Object(o.a)(t).apply(this,arguments))).fileList=[],e.uploadLoading=!1,e}return Object(c.a)(t,e),Object(r.a)(t,[{key:"onFileInit",value:function(e){Object(d.d)(e)||1===this.fileList.length||this.fileList.push({url:e})}},{key:"isImage",value:function(e){if(e){var t=e.lastIndexOf("."),a=e.substring(t+1,e.length).toLowerCase();return/\.bmp|png|jpg|jpeg$/.test(a)}return this.$message.warning("请选择图片"),!1}},{key:"beforeRemove",value:function(){this.fileList=[],this.$emit("input","")}},{key:"beforeUpload",value:function(e){return this.isImage(e.name)}},{key:"uploadPhoto",value:function(e){var t=e.file,a=this;Object(l.a)(t,{onReady:function(){a.uploadLoading=!0},onSuccess:function(e){a.uploadLoading=!1;var t="https://".concat(e.Location);a.fileList.push({url:t}),a.$emit("input",t)},onError:function(e){a.uploadLoading=!1,a.$message.error("图片上传失败，请重试")}})}},{key:"disabled",get:function(){return 1===this.fileList.length}}]),t}(u.g);Object(s.a)([Object(u.d)({default:""})],p.prototype,"value",void 0),Object(s.a)([Object(u.h)("value",{immediate:!0})],p.prototype,"onFileInit",null);var f=p=Object(s.a)([u.a],p),b=(a("84b9"),a("2877")),h=Object(b.a)(f,(function(){var e=this.$createElement,t=this._self._c||e;return t("el-upload",{class:{disabled:this.disabled},attrs:{multiple:!1,"before-remove":this.beforeRemove,"before-upload":this.beforeUpload,"http-request":this.uploadPhoto,"file-list":this.fileList,action:"/","list-type":"picture-card",limit:1}},[t("i",{directives:[{name:"loading",rawName:"v-loading",value:this.uploadLoading,expression:"uploadLoading"}],staticClass:"el-icon-plus"})])}),[],!1,null,"43c4d55d",null);t.a=h.exports},"0bc9":function(e,t,a){"use strict";a("96cf");var n=a("3b8d"),r=a("d225"),i=a("b0b4"),o=a("308d"),c=a("6bb5"),s=a("4e2b"),u=a("9ab4"),l=a("60a3"),d=a("d257"),p=a("54c5"),f=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(o.a)(this,Object(c.a)(t).apply(this,arguments))).formModel={},e.current={},e}var a;return Object(s.a)(t,e),Object(i.a)(t,[{key:"checkCurrentNotNull",value:function(){var e=this;return new Promise((function(t){Object(d.d)(e.current)?e.$message.warning("请选择需要操作的表格"):t(e.current)}))}},{key:"getData",value:(a=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$nextTick();case 2:return e.next=4,this.baseTable.getData();case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}]),t}(Object(l.c)(p.a));Object(u.a)([Object(l.f)()],f.prototype,"baseTable",void 0),f=Object(u.a)([l.a],f),t.a=f},"20c4":function(e,t,a){},3142:function(e,t,a){"use strict";a.r(t);a("96cf");var n=a("3b8d"),r=a("d225"),i=a("b0b4"),o=a("308d"),c=a("6bb5"),s=a("4e2b"),u=a("9ab4"),l=a("60a3"),d=a("9c8d"),p=a("0bc9"),f=[{type:"selection",width:65},{prop:"Sort",label:"序号",width:80},{label:"类型",width:240,h:function(e,t){return e("span","1"===t.row.Type?"学生端":"教师端")}},{prop:"TypeName",label:"名称",width:240},{prop:"JumpMessage",label:"跳转信息"},{label:"预览",width:120,h:function(e,t){t.vm;var a=t.row;return e("el-button",{attrs:{icon:"el-icon-view",circle:!0},on:{click:function(){window.open(a.Image)}}})}},{label:"状态",width:120,h:function(e,t){var a=t.row;return e("el-tag",{attrs:{type:"1"===a.Status?"success":"info"}},"1"===a.Status?"启用":"停用")}}],b=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),h=a("e2e8"),g=a("d257"),v=a("0aa9");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(o.a)(this,Object(c.a)(t).apply(this,arguments))).advertis={},e.rulesAdvertis={Image:[{required:!0,message:"请选择要上传的图片",trigger:"blur"}],TypeName:[{required:!0,message:"请输入轮播图名称",trigger:"blur"}],Sort:[{required:!0,message:"请输入轮播图序号",trigger:"blur"}],JumpMessage:[{required:!0,message:"请输入轮播图跳转信息",trigger:"blur"}]},e}return Object(s.a)(t,e),Object(i.a)(t,[{key:"opened",value:function(){this.advertis={},Object(g.d)(this.dialogData)||(this.advertis=Object.assign({},this.dialogData))}},{key:"update",value:function(){var e=this;this.$refs.formRef.validate((function(t){if(!t)return!1;e.updateLoading=!0,e.http({url:d.a.addAdvertis,data:O({},e.advertis)}).then((function(){e.$message.success("".concat(e.confirmText,"轮播图成功")),e.updateLoading=!1,e.syncShow=!1,e.updateSuccess()})).catch((function(t){e.$message.error("".concat(e.confirmText,"轮播图失败")),e.updateLoading=!1}))}))}},{key:"title",get:function(){return"".concat(this.confirmText,"轮播图")}}]),t}(Object(l.c)(h.a)),j=y=Object(u.a)([Object(l.a)({components:{BaseUpload:v.a}})],y),w=a("2877"),k=Object(w.a)(j,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{attrs:{visible:e.syncShow,title:e.title},on:{"update:visible":function(t){e.syncShow=t},opened:e.opened},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{attrs:{type:e.confirmType,loading:e.updateLoading},on:{click:e.update}},[e._v(e._s(e.confirmText))])]},proxy:!0}])},[e._v(" "),a("el-form",{ref:"formRef",attrs:{model:e.advertis,rules:e.rulesAdvertis,"status-icon":"","label-width":"130px"}},[a("el-form-item",{attrs:{label:"轮播图类型"}},[a("el-radio-group",{model:{value:e.advertis.Type,callback:function(t){e.$set(e.advertis,"Type",t)},expression:"advertis.Type"}},[a("el-radio",{attrs:{label:"1"}},[e._v("学生端")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("教师端")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"TypeName",label:"轮播图名称"}},[a("el-input",{attrs:{placeholder:"请输入轮播图名称"},model:{value:e.advertis.TypeName,callback:function(t){e.$set(e.advertis,"TypeName",t)},expression:"advertis.TypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"Sort",label:"轮播图序号"}},[a("el-input",{attrs:{placeholder:"请输入轮播图序号"},model:{value:e.advertis.Sort,callback:function(t){e.$set(e.advertis,"Sort",t)},expression:"advertis.Sort"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"JumpMessage",label:"轮播图跳转信息"}},[a("el-input",{attrs:{placeholder:"请输入轮播图跳转信息"},model:{value:e.advertis.JumpMessage,callback:function(t){e.$set(e.advertis,"JumpMessage",t)},expression:"advertis.JumpMessage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"轮播图上传",prop:"Image"}},[a("base-upload",{model:{value:e.advertis.Image,callback:function(t){e.$set(e.advertis,"Image",t)},expression:"advertis.Image"}})],1)],1)],1)}),[],!1,null,null,null).exports,x=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(o.a)(this,Object(c.a)(t).apply(this,arguments))).url=d.a.getAdvertisList,e.rowHeader=f,e.addUpdateDialogShow=!1,e}var a;return Object(s.a)(t,e),Object(i.a)(t,[{key:"created",value:function(){this.getData()}},{key:"add",value:function(){this.current={},this.addUpdateDialogShow=!0}},{key:"update",value:(a=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkCurrentNotNull();case 2:this.addUpdateDialogShow=!0;case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"del",value:function(){var e=this;this.$confirm("此操作将删除轮播图, 是否继续?",{confirmButtonText:"删除",confirmButtonClass:"el-button--danger el-icon-delete",cancelButtonText:"取消",type:"error"}).then((function(){e.http({url:d.a.deleteAdvertis,data:{advertisId:e.current.AdvertisID}}).then((function(){e.$message.success("轮播图删除成功"),e.getData()})).catch((function(){e.$message.error("轮播图删除失败")}))})).catch((function(){console.log()}))}},{key:"posterOnOff",value:function(e,t){var a=this;this.$confirm("此操作将".concat(e,"轮播图, 是否继续?"),{confirmButtonText:"".concat(e),cancelButtonText:"取消",type:"warning"}).then((function(){a.http({url:d.a.advertisExamine,data:{advertisId:a.current.AdvertisID,enable:t}}).then((function(){a.$message.success("".concat(e,"轮播图成功")),a.getData()})).catch((function(){a.$message.error("".concat(e,"轮播图失败"))}))})).catch((function(){console.log()}))}}]),t}(Object(l.c)(p.a)),T=x=Object(u.a)([Object(l.a)({components:{AddUpdateDialog:k}})],x),S=Object(w.a)(T,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-table",{ref:"baseTable",attrs:{url:e.url,"row-header":e.rowHeader,"show-page":!1},on:{create:e.add,update:e.update,delete:e.del,onuse:function(t){return e.posterOnOff("启用","1")},offuse:function(t){return e.posterOnOff("停用","-1")}},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}}),e._v(" "),a("add-update-dialog",{attrs:{show:e.addUpdateDialogShow,"dialog-data":e.current},on:{"update:show":function(t){e.addUpdateDialogShow=t},"update-success":e.getData}})],1)}),[],!1,null,null,null);t.default=S.exports},"6a8d":function(e,t,a){"use strict";a("7f7f"),a("96cf");var n=a("3b8d"),r=a("3438"),i=a.n(r),o=a("5c96"),c=a("bc3a"),s=a.n(c),u={Bucket:"keyushijian-1257034971",Region:"ap-shanghai"};a.d(t,"a",(function(){return p}));var l,d=new i.a({getAuthorization:(l=Object(n.a)(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/cos").then((function(e){a({TmpSecretId:e.data.TmpSecretId,TmpSecretKey:e.data.TmpSecretKey,XCosSecurityToken:e.data.XCosSecurityToken,ExpiredTime:e.data.ExpiredTime})})).catch((function(){o.Message.error("上传失败，请重试！")}));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)})});function p(e,t){return f.apply(this,arguments)}function f(){return(f=Object(n.a)(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.sliceUploadFile({Bucket:u.Bucket,Region:u.Region,Key:"kysj-admin/".concat(t.name),Body:t,onTaskReady:function(e){a.onReady(d,e)},onProgress:function(e){a.onProgress&&a.onProgress(e)}},(function(e,t){e?a.onError(e):a.onSuccess(t),a.onComplete&&a.onComplete()}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"84b9":function(e,t,a){"use strict";var n=a("20c4");a.n(n).a},e2e8:function(e,t,a){"use strict";var n=a("d225"),r=a("b0b4"),i=a("308d"),o=a("6bb5"),c=a("4e2b"),s=a("9ab4"),u=a("60a3"),l=a("54c5"),d=a("d257"),p=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(i.a)(this,Object(o.a)(t).apply(this,arguments))).formRef=null,e.updateLoading=!1,e}return Object(c.a)(t,e),Object(r.a)(t,[{key:"updateSuccess",value:function(e){return e}},{key:"close",value:function(){Object.assign(this.$data,this.$options.data.call(this))}},{key:"confirmType",get:function(){return Object(d.d)(this.dialogData)?"primary":"warning"}},{key:"confirmText",get:function(){return Object(d.d)(this.dialogData)?"添加":"修改"}}]),t}(Object(u.c)(l.a));Object(s.a)([Object(u.e)("show",{type:Boolean,default:!1})],p.prototype,"syncShow",void 0),Object(s.a)([Object(u.d)({default:function(){return{}}})],p.prototype,"dialogData",void 0),Object(s.a)([Object(u.b)("update-success")],p.prototype,"updateSuccess",null),p=Object(s.a)([u.a],p),t.a=p}}]);