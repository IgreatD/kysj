(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6e21675c"],{"0bc9":function(e,t,r){"use strict";r("96cf");var a=r("3b8d"),o=r("d225"),n=r("b0b4"),c=r("308d"),l=r("6bb5"),s=r("4e2b"),u=r("9ab4"),i=r("60a3"),d=r("d257"),f=r("54c5"),p=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).apply(this,arguments))).formModel={},e.current={},e}var r;return Object(s.a)(t,e),Object(n.a)(t,[{key:"checkCurrentNotNull",value:function(){var e=this;return new Promise((function(t){Object(d.d)(e.current)?e.$message.warning("请选择需要操作的表格"):t(e.current)}))}},{key:"getData",value:(r=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$nextTick();case 2:return e.next=4,this.baseTable.getData();case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),t}(Object(i.c)(f.a));Object(u.a)([Object(i.f)()],p.prototype,"baseTable",void 0),p=Object(u.a)([i.a],p),t.a=p},"97aa":function(e,t,r){"use strict";r.r(t);r("96cf");var a=r("3b8d"),o=r("d225"),n=r("b0b4"),c=r("308d"),l=r("6bb5"),s=r("4e2b"),u=r("9ab4"),i=r("60a3"),d=r("9c8d"),f=[{type:"selection",width:65},{label:"用户名",prop:"userName",width:150},{label:"昵称",prop:"name",width:150},{label:"角色",prop:"roleName",width:150},{label:"状态",width:120,h:function(e,t){var r="1"===t.row.status;return e("el-tag",{attrs:{type:r?"primary":"info"}},r?"启用":"停用")}}],p=r("54c5"),b=r("0bc9"),m=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),h=r("e2e8"),O=r("d257");function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(r,!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).apply(this,arguments))).roles=[],e.formModel={},e.formRules={roleName:[{required:!0,message:"请输入用户名称",trigger:"blur"}],name:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],passWord:[{required:!0,message:"请输入用户密码",trigger:"blur"}],roleId:[{required:!0,message:"请选择所属用户",trigger:"change"}],status:[{required:!0,message:"请选择用户状态",trigger:"change"}]},e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"initFormModel",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];Object(O.d)(e)||this.$set(this.formModel,t,r)}}},{key:"open",value:function(){Object(O.c)(this.roles)&&!Object(O.d)(this.roles)||this.getRoles()}},{key:"getRoles",value:function(){var e=this;this.http({url:d.a.getRoles,data:{}}).then((function(t){var r=t.data;e.roles=r.data}))}},{key:"addOrUpdate",value:function(){var e=this;this.$refs.formRef.validate((function(t){if(!t)return!1;e.updateLoading=!0,e.http({url:d.a.userOnOff,data:v({},e.formModel,{mobile:"",userId:e.formModel.userId||""})}).then((function(){e.$message.success("用户添加成功"),e.syncShow=!1,e.updateLoading=!1,e.updateSuccess()})).catch((function(t){e.$message.error(t.message||"用户添加失败"),e.updateLoading=!1}))}))}},{key:"title",get:function(){return"".concat(this.confirmText,"用户")}}]),t}(Object(i.c)(h.a));Object(u.a)([Object(i.h)("dialogData")],j.prototype,"initFormModel",null);var y=j=Object(u.a)([i.a],j),w=r("2877"),k=Object(w.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("base-dialog",{attrs:{visible:e.syncShow,title:e.title},on:{"update:visible":function(t){e.syncShow=t},open:e.open},scopedSlots:e._u([{key:"footer",fn:function(){return[r("el-button",{attrs:{type:e.confirmType,loading:e.updateLoading},on:{click:e.addOrUpdate}},[e._v(e._s(e.confirmText))])]},proxy:!0}])},[e._v(" "),r("el-form",{ref:"formRef",attrs:{model:e.formModel,rules:e.formRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名称",prop:"roleName"}},[r("el-input",{attrs:{placeholder:"请输入用户名称"},model:{value:e.formModel.userName,callback:function(t){e.$set(e.formModel,"userName",t)},expression:"formModel.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户昵称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入用户昵称"},model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户密码",prop:"passWord"}},[r("el-input",{attrs:{placeholder:"请输入用户密码"},model:{value:e.formModel.passWord,callback:function(t){e.$set(e.formModel,"passWord",t)},expression:"formModel.passWord"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所属用户",prop:"roleId"}},[r("el-select",{attrs:{placeholder:"请选择所属用户"},model:{value:e.formModel.roleId,callback:function(t){e.$set(e.formModel,"roleId",t)},expression:"formModel.roleId"}},e._l(e.roles,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,disabled:"1"===e.roleId,value:e.roleId}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"用户状态",prop:"status"}},[r("el-radio-group",{model:{value:e.formModel.status,callback:function(t){e.$set(e.formModel,"status",t)},expression:"formModel.status"}},[r("el-radio",{attrs:{label:"1"}},[e._v("正常")]),e._v(" "),r("el-radio",{attrs:{label:"2"}},[e._v("停用")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.formModel.remark,callback:function(t){e.$set(e.formModel,"remark",t)},expression:"formModel.remark"}})],1)],1)],1)}),[],!1,null,null,null).exports,M=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).apply(this,arguments))).addUpdateDialogShow=!1,e}var r;return Object(s.a)(t,e),Object(n.a)(t,[{key:"mounted",value:function(){this.getData()}},{key:"add",value:function(){this.current={},this.addUpdateDialogShow=!0}},{key:"update",value:function(){var e=this;this.checkCurrentNotNull().then((function(){e.addUpdateDialogShow=!0}))}},{key:"roleOnOff",value:(r=Object(a.a)(regeneratorRuntime.mark((function e(t,r){var a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkCurrentNotNull();case 2:this.$confirm("此操作将".concat(r,"：").concat(this.current.roleName,", 是否继续?"),"".concat(r,"用户"),{confirmButtonText:"".concat(r),cancelButtonText:"取消",type:"warning"}).then((function(){a.http({url:d.a.roleOnOff,data:{roleId:a.current.roleId,status:t}}).then((function(){a.$message.success("用户".concat(r,"成功")),a.getData()}))}));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"url",get:function(){return d.a.getUsers}},{key:"rowHeader",get:function(){return f}}]),t}(Object(i.c)(p.a,b.a)),x=M=Object(u.a)([Object(i.a)({components:{AddUpdateDialog:k}})],M),D=Object(w.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("base-table",{ref:"baseTable",attrs:{"row-header":e.rowHeader,"show-query":!1,"show-functions":!0,url:e.url},on:{create:e.add,update:e.update,onuse:function(t){return e.roleOnOff("1","启用")},offuse:function(t){return e.roleOnOff("-1","停用")}},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}}),e._v(" "),r("add-update-dialog",{attrs:{show:e.addUpdateDialogShow,"dialog-data":e.current},on:{"update:show":function(t){e.addUpdateDialogShow=t},"update:dialogData":function(t){e.current=t},"update:dialog-data":function(t){e.current=t},"update-success":e.getData}})],1)}),[],!1,null,null,null);t.default=D.exports},e2e8:function(e,t,r){"use strict";var a=r("d225"),o=r("b0b4"),n=r("308d"),c=r("6bb5"),l=r("4e2b"),s=r("9ab4"),u=r("60a3"),i=r("54c5"),d=r("d257"),f=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(n.a)(this,Object(c.a)(t).apply(this,arguments))).formRef=null,e.updateLoading=!1,e}return Object(l.a)(t,e),Object(o.a)(t,[{key:"updateSuccess",value:function(e){return e}},{key:"close",value:function(){Object.assign(this.$data,this.$options.data.call(this))}},{key:"confirmType",get:function(){return Object(d.d)(this.dialogData)?"primary":"warning"}},{key:"confirmText",get:function(){return Object(d.d)(this.dialogData)?"添加":"修改"}}]),t}(Object(u.c)(i.a));Object(s.a)([Object(u.e)("show",{type:Boolean,default:!1})],f.prototype,"syncShow",void 0),Object(s.a)([Object(u.d)({default:function(){return{}}})],f.prototype,"dialogData",void 0),Object(s.a)([Object(u.b)("update-success")],f.prototype,"updateSuccess",null),f=Object(s.a)([u.a],f),t.a=f}}]);